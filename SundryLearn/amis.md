## amis
### 1. 介绍
amis 是一个低代码前段框架，使用 JSON 配置来生成页面，可以减少页面开发工作量，极大提升效率。

建立 amis 到初衷，是对于大部分常用页面，应该使用最简单到方法来实现，甚至不需要学习前段框架和工具。

使用 amis 的好处在于：
1. 不需要懂前端。
2. 不受前端技术更新的影响。
3. 享受 amis 的不断升级。
4. 可以完全使用可视化页面编辑器来制作页面。
5. 提供完整的界面解决方案，只需 JSON 配置就能完成完整功能开发，包括数据获取、表单提交以及验证等功能。
6. 此外，还有其他亮点：内置多种 UI 组件、容器支持无限级嵌套、经历长时间等实战等等。

amis 不适合做：
1. 大量定制 UI（如对于追求个性化视觉效果的toC页面）。
2. 极为复杂或特殊等交互。

### 2. 快速开始
amis 有两种使用方法：
- JS SDK，用于任意页面。
- React，用于 React 项目。

#### 2.1 React 中的使用
**主题样式**

amis 支持三种主题，使用时需要：
1. 在 html 或 js 中引入对应的样式文件。
2. 在渲染器中使用配置主题。

**基本使用**

引入相应的库，引入对应的组件和函数。

amis.render 函数：`(schema, props, env) => JSX.Element`，参数：
- schema 是页面配置；
- props 可以用来传递数据；
- env 是环境变量，可以理解为这个渲染器工具的配置项，需要用户实现部分借口。包含了若干参数如：fetcher、notify、alert、confirm 等等。

### 3. 概念
#### 3.1 配置与组件
amis 的配置就是一段 JSON：
- type 是节点中最重要的字段，它告诉 amis 当前节点需要渲染的是什么组件。
- 其它字段可以认为是组件的属性，组件会根据这些值来渲染页面内容。

容器型的组件可以互相嵌套，从而形成各种树形结构，以实现复杂页面的制作。

#### 3.2 数据域与数据链
**数据域**

数据域是 amis 的一个重要概念，在内容区渲染的模板变量，会在当前组件的数据域中获取对应的值。

组件的 data 属性值是数据域的一种形式，没有显示的配置数据域时，可以假想它的值为一个空对象。

**数据链**
当节点存在于组件树中时，根据数据链来处理各个组件数据域之间的关系。所以当前组件遇到获取变量的场景时：
1. 首先在当前组件的数据域中寻找变量，找到的话就通过数据映射完成渲染，停止寻找过程。
2. 若在当前数据域中没有找到，则向上寻找，在父组件的数据域中，重复步骤 1 和 2.
3. 一直寻找，知道顶级节点（page 节点），结束寻找。

只有少数几个容器组件会创建新的数据域，除了 page，还有 CRUD、Dislog、IFrame 等。不应该直接给容器组件添加 data 属性，而是应该使用 Service 包裹一层。

**初始化配置域**
初始化数据：
1. 最好的方式是为当前组件配置初始化接口 `initApi`。注意：
    - 该接口除了配置字符串，还可以配置复杂的对象结构。
    - 有的组件不支持该接口，一般可以使用 Service 组件来辅助实现。
    - 接口返回字段必须有：status、msg 和 data（必须是 key-value 结构的对象）。
2. 显示配置 data 属性值。

二者同时配置时，数据域会合并他们的数据。

**更新数据域**
部分组件的某些交互或行为会对当前组件的数据域进行更行，如 form、Formula 组件等。他们会将服务器返回的数据域当前数据域进行 merge，然后更新数据域。

#### 3.3 模板
amis 借鉴其他模板引擎，实现来一套模板渲染功能。

**模版字符串**

使用模板字符串，可以使用数据映射语法来获取数据域中变量的值。

**JS 模板引擎**

amis 支持 JS 模板引擎进行组织输出，内部采用 lodash template 进行实现。

模板字符串和模板引擎不可以交叉使用。

#### 3.4 数据映射
